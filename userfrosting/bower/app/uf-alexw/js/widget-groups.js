/*! srinivas 2015-07-24 , 6:53:27 PM */
function groupForm(a,b){b="undefined"!=typeof b?b:"",$("#"+a).length&&$("#"+a).remove();var c={box_id:a,render:"modal"},d=site.uri["public"]+"/forms/groups";b&&(c={box_id:a,render:"modal",mode:"update"},d=site.uri["public"]+"/forms/groups/g/"+b),$.ajax({type:"GET",url:d,data:c,cache:!1}).fail(function(a){$("#userfrosting-alerts").flashAlerts().done(function(){})}).done(function(b){$("body").append(b),$("#"+a).modal("show"),$("#"+a+" .select2").select2(),$("#"+a+" input[name=is_default]:checked").addClass("active"),$("#"+a+" input[name=icon]").on("change",function(){$(this).prev(".icon-preview").find("i").removeClass().addClass($(this).val())}),$("form[name='group']").formValidation({framework:"bootstrap",icon:{valid:"fa fa-check",invalid:"fa fa-times",validating:"fa fa-refresh"},fields:validators}).on("success.form.fv",function(a){a.preventDefault();var b=$(a.target),c=b.find("input, textarea, select").not(":checkbox").serialize();b.find("input[type=checkbox]:enabled").each(function(){c+=$(this).is(":checked")?"&"+encodeURIComponent(this.name)+"=1":"&"+encodeURIComponent(this.name)+"=0"});var d=$("meta[name=csrf_token]").attr("content");c+="&csrf_token="+encodeURIComponent(d);var e=b.attr("action");return $.ajax({type:"POST",url:e,data:c}).done(function(a,b,c){window.location.reload(!0)}).fail(function(a){1==site.debug?document.body.innerHTML=a.responseText:console.log("Error ("+a.status+"): "+a.responseText),$("#form-alerts").flashAlerts().done(function(){b.data("formValidation").disableSubmitButtons(!1)})})})})}function deleteGroupDialog(a,b,c){$("#"+a).length&&$("#"+a).remove();var d=site.uri["public"]+"/forms/confirm",e={box_id:a,box_title:"Delete Group",confirm_message:"Are you sure you want to delete the group "+c+"?",confirm_button:"Yes, delete group"};$.ajax({type:"GET",url:d,data:e}).fail(function(a){$("#userfrosting-alerts").flashAlerts().done(function(){})}).done(function(c){$("body").append(c),$("#"+a).modal("show"),$("#"+a+" .js-confirm").click(function(){var c=site.uri["public"]+"/groups/g/"+b+"/delete";csrf_token=$("meta[name=csrf_token]").attr("content");var d={group_id:b,csrf_token:csrf_token};$.ajax({type:"POST",url:c,data:d}).done(function(a){window.location.reload()}).fail(function(b){1==site.debug?document.body.innerHTML=b.responseText:console.log("Error ("+b.status+"): "+b.responseText),$("#userfrosting-alerts").flashAlerts().done(function(){$("#"+a).modal("hide")})})})})}$(document).ready(function(){$(".js-group-create").click(function(){groupForm("dialog-group-create")}),$(".js-group-edit").click(function(){var a=$(this),b=a.data("id");groupForm("dialog-group-edit",b)}),$(".js-group-delete").click(function(){var a=$(this),b=a.data("id"),c=a.data("name");deleteGroupDialog("dialog-group-delete",b,c)})});